<div class="top-container">

  @if (!isVideoPlaying) {
    <div class="preview-wrapper">
      <swiper-container
        loop="true"
        autoplay-delay="5000"
        class="preview-swiper"
      >

<!--        <swiper-slide>-->
<!--          <img priority [ngSrc]="getBackdropUrl()" fill alt="backdrop"-->
<!--               style="width: 100%; height: 100%; object-fit: cover;" />-->
<!--        </swiper-slide>-->


      </swiper-container>

        <div class="movie-details-overlay">
          <div class="movie-header">
            <h1 class="movie-title">{{show!.name}}</h1>
<!--            @if (currentVideoInfo) {-->
<!--              <h5>{{currentVideoInfo.title}}</h5>-->
<!--            }-->
          </div>
          <p class="movie-description">
            To jest przykładowy opis filmu. Możesz go później podmienić na dane z backendu.
          </p>
          <button class="play-button" (click)="playVideoClicked.emit()">
            <i class="fa-solid fa-play"></i> Play
          </button>
        </div>
    </div>
  }

  @if (selectedVideoUrl.length > 0) {
    <div class="video-wrapper">
<!--      <app-video-player-component-->
<!--        [show]="show"-->
<!--        [currentVideoInfo]="currentVideoInfo"-->
<!--        [src]="selectedVideoUrl"-->
<!--        (playVideoClicked)="playVideoClicked.emit()"-->
<!--        (updateVideoData)="updateVideoData.emit($event)">-->
<!--      </app-video-player-component>-->
    </div>
  }

</div>

@if (show) {
  <div class="movie-details-container">

      <div class="content-container">

        <div class="content-type-toggle">
            <button
              class="tab-button"
              [class.active]="selectedContentType === 'seasons'"
              (click)="selectSeasonContentType()">
              Seasons
            </button>


            <button
              class="tab-button"
              [class.active]="selectedContentType === 'movies'"
              (click)="selectMoviesContentType()">
              Movies
            </button>

        </div>
        @if (selectedContentType === 'seasons') {
          @if (selectedSeason) {

            <div class="season-container">
              <select [(ngModel)]="selectedSeason" (ngModelChange)="setUpEpisodes()" class="form-select">
                @for (season of show.seasons; track season.id) {
                  <option [value]="season.number">Season {{season.number}}</option>
                }
              </select>
            </div>
            <div class="episode-container">
              <select [(ngModel)]="selectedEpisode" (ngModelChange)="onEpisodeSelect()" class="form-select">
                @for (episode of episodes; track episode.id) {
                  <option [ngValue]="episode">Episode {{ episode.number }}</option>
                }
              </select>
            </div>
          }
        }

        @if (selectedContentType === 'movies') {
          <div class="video-grid">
            @for (movie of show.movies; track movie.id) {
<!--              <app-video-card-component-->
<!--                [title]="movie.videoInfo!.title"-->
<!--                (cardClick)="watchMovie(movie.videoInfo!)"-->
<!--                [iconFilePath]="movie.videoInfo!.rootPath + '/icon/' + movie.videoInfo!.iconFileName"-->
<!--              ></app-video-card-component>-->
            }
          </div>
        }


      </div>

  </div>
}
